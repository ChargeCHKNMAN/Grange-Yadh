<!DOCTYPE html>
<html>
<head>
    <title>Timetable Application</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        table {
            border-collapse: collapse;
            margin-top: 20px;
            width: 100%;
        }
        th, td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #ddd;
        }
        .not-found {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Student Timetable</h1>

    <form method="POST">
        <label>Enter Student ID:</label>
        <input type="text" name="student_id" value="{{ student_id }}">
        <button type="submit">View Timetable</button>
    </form>

    {% if not_found %}
        <p class="not-found">No timetable found for ID: {{ student_id }}</p>
    {% endif %}

    {% if timetable %}
        <table>
            <tr>
                <th>Time Slot</th>
                {% for day in days %}
                    <th>{{ day }}</th>
                {% endfor %}
            </tr>
            {% for i, slot in enumerate(time_slots) %}
                <tr>
                    <td>{{ slot }}</td>
                    {% for day_classes in timetable %}
                        <td>{{ day_classes[i] }}</td>
                    {% endfor %}
                </tr>
            {% endfor %}
        </table>

        <hr>

        <h2>Set a Reminder</h2>
        <form id="reminderForm">
            <label for="timeSlotSelect">Choose a time slot:</label>
            <select id="timeSlotSelect" name="time_slot">
                {% for slot in time_slots %}
                    <option value="{{ slot }}">{{ slot }}</option>
                {% endfor %}
            </select>

            <label for="reminderTime">Remind me in (seconds):</label>
            <input type="number" id="reminderTime" min="1" value="10">

            <button type="button" onclick="setReminder()">Set Reminder</button>
        </form>

        <p id="reminderMessage" style="color: green;"></p>

        <script>
            function setReminder() {
                let slot = document.getElementById('timeSlotSelect').value;
                let seconds = parseInt(document.getElementById('reminderTime').value);
                let messageEl = document.getElementById('reminderMessage');

                messageEl.textContent = `Reminder set for ${slot} in ${seconds} seconds.`;

                setTimeout(() => {
                    if (navigator.vibrate) {
                        navigator.vibrate([500, 200, 500]);
                    }
                    alert(`Reminder: Your ${slot} class is starting soon!`);
                }, seconds * 1000);
            }
        </script>
    {% endif %}
</body>
</html>
